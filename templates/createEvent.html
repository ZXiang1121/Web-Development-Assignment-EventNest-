{% extends "base.html" %}
{% block title %}EventNest - Create Event{% endblock %}

{% block content %}
<div class="p-5 bg-light">
    <div class="container-sm col-lg-6 ml-auto">

        <h2 class="display-7">Create Event</h2>

        <form action="/action_page.php" class="needs-validation" novalidate>
            {% from "includes/_formHelper.html" import render_field %}
            <div class="col pt-2">
                    <label class="control-label" for="ename">Event Name</label>
                    <input type="text" class="form-control" id="ename" required>

                    <div class="valid-feedback">Valid.</div>
                    <div class="invalid-feedback">Please fill out this field.</div>

                    <label class="control-label" for="ename">Event Category</label>
                    <input type="text" class="form-control" id="ename" required>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
		
	<script>
	$(document).ready(function() {
        var max_fields      = 6; //maximum input boxes allowed
        var wrapper         = $(".input_fields_wrap"); //Fields wrapper
        var add_button      = $(".add_field_button"); //Add button ID
    
        var x = 1; //initlal text box count
	
	
   $(add_button).click(function(e){ //on add input button click
        e.preventDefault();
        if(x < max_fields){ //max input box allowed
	
		     //text box increment
            $(wrapper).append(
                `
                <div class="border-bottom pb-2">
                    <div class="row py-3">
                        <div class="col">
                            <label>Seat Area / Seat Type</label>
                            <input type="text" name="Lname" class="form-control" placeholder="E.g. Cat 1">
                        </div>
                    </div>
                    <div class="row pb-3">
                        <div class="col">
                            <label>Ticket Available</label>
                            <input type="text" name="Lname" class="form-control" placeholder="E.g. Cat 1">
                        </div>
                        <div class="col">
                            <label>Price</label>
                            <input type="text" name="Lname" class="form-control" placeholder="E.g. 170">
                        </div>
                    </div>
                    <a href="#" class="remove_field">Remove</a>
                </div>
                `
                ); //add input box
            x++; 
	    }
    });
   
    $(wrapper).on("click",".remove_field", function(e){ //user click on remove text
       
		e.preventDefault(); 
		$(this).parent('div').remove(); 
		x--;
    })
});
	
	</script>
    
    <div class="input_fields_wrap border p-5 my-4 rounded shadow-sm">
        <button class="add_field_button btn btn-primary">Add More Fields</button>
        
        <div class="border-bottom pb-2">
            <div class="row py-3">
                <div class="col">
                    <label>Seat Area / Seat Type</label>
                    <input type="text" name="Lname" class="form-control" placeholder="E.g. Cat 1">
                </div>
            </div>
            <div class="row pb-3">
                <div class="col">
                    <label>Ticket Available</label>
                    <input type="text" name="Lname" class="form-control" placeholder="E.g. Cat 1">
                </div>
                <div class="col">
                    <label>Price</label>
                    <input type="text" name="Lname" class="form-control" placeholder="E.g. 170">
                </div>
            </div>

        </div>


    </div>

            <div class="row pb-4">
                <div class="col">
                    <label>Start Date</label>
                    <input type="text" name="Lname" class="form-control" placeholder="DD/MM/YY">
                </div>
                <div class="col">
                    <label>End Date</label>
                    <input type="text" name="Lname" class="form-control" placeholder="DD/MM/YY">
                </div>
            </div>

            <div class="row pb-4">
                <div class="col">
                    <label>Event Location</label>
                    <input type="text" name="Lname" class="form-control" placeholder="Event Location">
                </div>
            </div>


            <div class="row">
                <div class="col">
                    <label>Add Event Poster</label>
                    <div class="image-upload">
                        <label for="file-input1">
                            <img id="previewImg" src="https://www.chargeandparking.com/assets/img/default.png" style="width: 70%; border: 2px solid lightgray;" />
                        </label>
                        
                        <input id="file-input1" type="file" onchange="poster(this);" style="display: none;" />
                    </div>
                </div>

                <div class="col">
                    <label>Add Seating Image</label>
                    <div class="image-upload">
                        <label for="file-input2">
                            <img id="previewImg2" class="overflow-hidden" src="https://www.chargeandparking.com/assets/img/default.png" style="width: 70%; border: 2px solid lightgray;" />
                        </label>

                        <input id="file-input2" type="file" onchange="seating(this);" style="display: none;" />
                    </div>
                </div>
            </div>
        </div>
                



            <div class="row justify-content-center mt-5 mb-3">
                <form action="" method="POST">
                    <input type="submit" class="btn btn-primary sm" style="width:40%" value="Submit">
                </form>
            </div>

        </form>
    </div>
</div>
</div>

<script>
// Disable form submissions if there are invalid fields
(function() {
  'use strict';
  window.addEventListener('load', function() {
    // Get the forms we want to add validation styles to
    var forms = document.getElementsByClassName('needs-validation');
    // Loop over them and prevent submission
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();

// preview uploaded
function poster(input){
        var file = $("input[type=file]").get(0).files[0];

        if(file){
          var reader = new FileReader();

          reader.onload = function(){
              $("#previewImg").attr("src", reader.result);
          }

          reader.readAsDataURL(file);
        }
    }

function seating(input){
    var seats = $("input[type=file]").get(1).files[0];

    if(seats){
        var reader = new FileReader();

        reader.onload = function(){
            $("#previewImg2").attr("src", reader.result);
        }

        reader.readAsDataURL(seats);
    }
}

</script>
{% endblock %}